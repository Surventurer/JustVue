<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JustVue - A modern, secure snippet manager for code, images, and PDFs with real-time sync and end-to-end encryption.">
    <meta name="keywords" content="snippet manager, code storage, secure notes, encrypted storage, Supabase">
    <meta name="author" content="Surventurer">
    <meta name="theme-color" content="#667eea">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="JustVue - Secure Snippet Manager">
    <meta property="og:description" content="Store your code snippets, images, and PDFs securely with real-time sync.">
    <meta property="og:image" content="/assets/images/logo.png">
    
    <!-- Performance: Preconnect to external resources -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <title>JustVue - Secure Snippet Manager</title>
    <link rel="icon" id="favicon" type="image/png" href="assets/images/logo.png">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script>
        // Dark mode favicon - invert logo for visibility
        (function() {
            const favicon = document.getElementById('favicon');
            const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
            
            function updateFavicon(isDark) {
                if (isDark && favicon) {
                    // Create white version of favicon using canvas
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        
                        // Draw original image
                        ctx.drawImage(img, 0, 0);
                        
                        // Invert colors for dark mode
                        ctx.globalCompositeOperation = 'difference';
                        ctx.fillStyle = 'white';
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                        
                        // Update favicon
                        favicon.href = canvas.toDataURL('image/png');
                    };
                    img.src = 'assets/images/logo.png';
                } else if (favicon) {
                    favicon.href = 'assets/images/logo.png';
                }
            }
            
            // Initial check
            updateFavicon(darkModeQuery.matches);
            
            // Listen for changes
            darkModeQuery.addEventListener('change', (e) => updateFavicon(e.matches));
        })();
    </script>
</head>
<body>
    <div class="container">
        <h1>JustVue</h1>
        
        <div class="auto-update-indicator" id="autoUpdateIndicator" title="Auto-update is active">
            <span class="pulse-dot"></span>
            <span class="indicator-text">Live</span>
        </div>
        
        <div class="search-section">
            <input type="text" id="searchInput" placeholder="üîç Search: title, date, or use + for both" aria-label="Search snippets">
        </div>
        
        <div class="input-section">
            <input type="password" id="passwordInput" placeholder="Enter password..." aria-label="Password for snippet" autocomplete="new-password">
            <input type="text" id="titleInput" placeholder="Enter a title..." aria-label="Snippet title">
            
            <div class="content-type-selector">
                <label class="type-option">
                    <input type="radio" name="contentType" value="text" checked>
                    <span>üìù Text/Code</span>
                </label>
                <label class="type-option">
                    <input type="radio" name="contentType" value="image">
                    <span>üñºÔ∏è Image</span>
                </label>
                <label class="type-option">
                    <input type="radio" name="contentType" value="pdf">
                    <span>üìÑ PDF</span>
                </label>
            </div>
            
            <textarea id="codeInput" placeholder="Enter your text/code here..." aria-label="Snippet content"></textarea>
            
            <div id="fileUploadArea" style="display:none;">
                <input type="file" id="fileInput" accept="image/*,.pdf" style="display:none;">
                <button type="button" id="fileSelectBtn" class="btn btn-file-select">
                    üìÅ Choose File
                </button>
                <div id="filePreview" style="display:none;"></div>
                <div class="file-size-note" id="fileSizeNote">
                    ‚ö†Ô∏è For hide the files, max size is <strong>2 MB.</strong>
                </div>
            </div>
            
            <div class="hide-content-section">
                <label class="toggle-container">
                    <input type="checkbox" id="hideContentToggle">
                    <span class="toggle-slider"></span>
                    <span class="toggle-label">üîí Hide This Content</span>
                </label>
            </div>
            <button id="addBtn" class="btn btn-add">Add Snippet</button>
        </div>

        <div class="code-list" id="codeList">
            <!-- Code snippets will be added here -->
        </div>
    </div>

    <!-- Supabase Client for Direct Uploads -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Main Application -->
    <script src="assets/js/app.js"></script>
</body>
</html>
